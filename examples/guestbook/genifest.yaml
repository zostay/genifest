metadata:
  cloudHome: "."
  scripts: ["scripts"]
  manifests: ["manifests"]
  files: ["files"]

functions:
  - name: "get-replicas"
    params:
      - name: "environment"
        required: true
    valueFrom:
      default:
        value: "2"

  - name: "get-image-tag"
    params:
      - name: "service"
        required: true
      - name: "environment"
        required: true
    valueFrom:
      template:
        string: "${service}:${environment}-latest"
        variables:
          - name: "service"
            valueFrom:
              argRef:
                name: "service"
          - name: "environment"
            valueFrom:
              argRef:
                name: "environment"

  - name: "get-database-host"
    params:
      - name: "environment"
        required: true
    valueFrom:
      default:
        value: "postgres-service"
